{% extends 'base.html' %}
{% load static %}

{% block title %}Услуги | Производство{% endblock %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'css/services.css' %}">
{% endblock %}

{% block content %}
<main class="main">
  <div class="main-content">
    <h1 class="title">Услуги</h1>
    <img src="{% static 'imgs/Group 11.jpg' %}" alt="" class="line-img">
    <div class="filters">
      <a href="{% url 'services_brand' %}" class="service-title">Брендинг</a>
      <a href="{% url 'services_prod' %}" class="service-title">Производство</a>
      <a href="{% url 'services_install' %}" class="service-title">Установка</a>
    </div>
  </div>
  <div class="cards">
    <div class="cards-content">
      <div class="card">
        <img src="{% static 'imgs/4.png' %}" class="card-img">
        <p class="card-title">Изготовление вывесок</p>
        <div class="card-info">
          <div class="item">
            <p class="item-text">динамические вывески от 30 тыс.</p>
            <div class="item-line"></div>
          </div>
          <div class="item">
            <p class="item-text">вывески с QR-кодами от 15 тыс.</p>
            <div class="item-line"></div>
          </div>
          <div class="item">
            <p class="item-text">3D-вывески от 20 тыс.</p>
            <div class="item-line"></div>
          </div>
        </div>
      </div>
      <div class="card">
        <img src="{% static 'imgs/5.png' %}" alt="" class="card-img">
        <p class="card-title">Материалы для торговых точек</p>
        <div class="card-info">
          <div class="item">
            <p class="item-text">изготовление витрин от 10 тыс.</p>
            <div class="item-line"></div>
          </div>
          <div class="item">
            <p class="item-text">производство буклетов от 15 тыс.</p>
            <div class="item-line"></div>
          </div>
          <div class="item">
            <p class="item-text">печатные услуги от 12 тыс.</p>
            <div class="item-line"></div>
          </div>
        </div>
      </div>
      <div class="card">
        <img src="{% static 'imgs/6.png' %}" alt="" class="card-img">
        <p class="card-title">Навигационные системы</p>
        <div class="card-info">
          <div class="item">
            <p class="item-text">вывески на нескольких языках от 30 тыс.</p>
            <div class="item-line"></div>
          </div>
          <div class="item">
            <p class="item-text">баннеры и указатели от 15 тыс.</p>
            <div class="item-line"></div>
          </div>
          <div class="item">
            <p class="item-text">сенсорные экраны от 20 тыс.</p>
            <div class="item-line"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <button id="openModal" class="submit-application">Подать заявку</button>
</main>

<!-- Модальное окно -->
<div id="applicationModal" class="modal" style="display: none;">
  <div class="modal-content">
    <span class="close">&times;</span>
    <div class="modal-body">
      <form id="applicationForm" class="application_form" method="post" action="{% url 'services_prod' %}">
        {% csrf_token %}
        <p class="application_title_form">
          <b>Оставьте заявку на услугу!</b>
        </p>

        <!-- Выбор услуги -->
        <label for="service">Вид услуги:</label>
        <select id="service" name="service" class="form-control" required>
          <option value="">Выберите услугу</option>
          <option value="branding">Брендинг</option>
          <option value="production">Производство</option>
          <option value="installation">Установка</option>
        </select>

        <!-- Выбор подуслуги -->
        <label for="sub_service">Подуслуга:</label>
        <select id="sub_service" name="sub_service" class="form-control" required>
          <option value="">Выберите подуслугу</option>
        </select>

        <!-- Описание заказа -->
        <textarea id="applicationText" name="description" class="application_input" placeholder="Опишите ваш заказ" required></textarea>

        <button type="submit" class="auth-button">Отправить заявку</button>
      </form>
    </div>
  </div>
</div>

<!-- Скрипт для управления модальным окном и выпадающими списками -->
<script>
  // Данные для подуслуг
  const subServices = {
    branding: [
      { value: 'logo', text: 'Создание логотипа' },
      { value: 'colors', text: 'Подбор цветовых палитр' },
      { value: 'events', text: 'Брендирование мероприятий' },
    ],
    production: [
      { value: 'signs', text: 'Изготовление вывесок' },
      { value: 'materials', text: 'Материалы для торговых точек' },
      { value: 'navigation', text: 'Навигационные системы' },
    ],
    installation: [
      { value: 'strategies', text: 'Создание рекламных стратегий' },
      { value: 'consulting', text: 'Консультации по брендингу' },
      { value: 'slogans', text: 'Разработка слоганов' },
    ],
  };

  // Получаем элементы DOM
  const serviceSelect = document.getElementById('service');
  const subServiceSelect = document.getElementById('sub_service');

  // Обновляем подуслуги при изменении услуги
  serviceSelect.addEventListener('change', function () {
    const selectedService = this.value;
    subServiceSelect.innerHTML = '<option value="">Выберите подуслугу</option>';

    if (selectedService && subServices[selectedService]) {
      subServices[selectedService].forEach(subService => {
        const option = document.createElement('option');
        option.value = subService.value;
        option.text = subService.text;
        subServiceSelect.appendChild(option);
      });
    }
  });

  // Управление модальным окном
  const modal = document.getElementById("applicationModal");
  const openModalBtn = document.getElementById("openModal");
  const closeModalBtn = document.querySelector(".close");

  openModalBtn.addEventListener("click", function () {
    modal.style.display = "block";
  });

  closeModalBtn.addEventListener("click", function () {
    modal.style.display = "none";
  });

  window.addEventListener("click", function (event) {
    if (event.target === modal) {
      modal.style.display = "none";
    }
  });
</script>
{% endblock %}